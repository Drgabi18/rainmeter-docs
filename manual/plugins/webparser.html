---
layout: manual
title: 'WebParser plugin'
---
<!--{% comment %}--><base href="../../"><script src="js/_local.js"></script><!--{% endcomment %}-->

<p><code>Plugin=WebParser</code> reads and parses information from web pages.</p>

<p>The plugin uses <a href="http://www.regular-expressions.info/tutorial.html">Regular Expressions</a> to extract information from any web page or <a href="#Local">local file</a>.</p>

<h2>Usage</h2>
<p>WebParser measures take the form:</p>
{% highlight ini %}
[MeasureParent]
Measure=Plugin
Plugin=WebParser
URL=http://SomeSite.com
RegExp="(?siU)&lt;Item&gt;(.*)&lt;/Item&gt;.*&lt;Item&gt;(.*)&lt;/Item&gt;"
{% endhighlight %}
<p id="ParentChild">This example creates two <a href="#StringIndex">StringIndex</a> values in what is referred to as the "parent" WebParser measure. The information is generally used in subsequent "child" WebParser measures:</p>
{% highlight ini %}
[MeasureChild1]
Measure=Plugin
Plugin=WebParser
URL=[MeasureParent]
StringIndex=1

[MeasureChild2]
Measure=Plugin
Plugin=WebParser
URL=[MeasureParent]
StringIndex=2
{% endhighlight %}
<p>The values of the two <a href="#ParentChild">child</a> measures are now the information parsed into StringIndexes 1 and 2 by the <a href="#ParentChild">parent</a> measure. These can then be used with <a href="/manual/meters/general-options/#MeasureName">MeasureName</a> and other options in <a href="/manual/meters">meters</a>.

<p><b>Note:</b> More information and examples for WebParser can be found at <a href="/tips/webparser-tutorial">WebParser Tutorial</a> and <a href="http://rainmeter.net/cms/Rainmeter101-Tutorial4">RSS Skin Tutorial</a>.</p>

<h2>Options</h2>
<dl>
	<dt>General measure options</dt>
	<dd>
		<p>All <a href="/manual/measures/general-options">general measure options</a> are valid.</p>
	</dd>

	<dt id="URL"><code>URL</code></dt>
	<dd>
		<p><a href="http://en.wikipedia.org/wiki/Uniform_resource_locator">URL</a> to the site or file to be downloaded and parsed. If the name of another WebParser measure is used, e.g. <code>URL=[SomeMeasure]</code>, then the value of the <a href="#ParentChild">parent</a> measure is used, generally by referring to a specific <a href="#StringIndex">StringIndex</a> number.</p>

		<p id="Authentication">WebParser <b>cannot</b> use cookies or other session-based authentication, so it <b>cannot</b> be used to retrieve information from web sites requiring a login. However, Webparser <b>can</b> be used on sites which support <a href="http://en.wikipedia.org/wiki/Basic_access_authentication">HTTP authentication</a>. E.g. <code>http://myname:mypassword@somesite.com</code>.</p>

		<p id="Local">WebParser can read and parse local files on your computer by using the <code>file://</code> <a href="http://en.wikipedia.org/wiki/File_URI_scheme">URI scheme</a>. E.g. <code>URL=file://<a href="/manual/variables/built-in-variables#CURRENTPATH">#CURRENTPATH#</a>SomeFile.txt</code>.</p>
	</dd>

	<dt id="RegExp"><code>RegExp</code></dt>
	<dd>
		<p>The regular expression used in parsing. The plugin uses <a href="http://www.pcre.org/">Perl Compatible Regular Expressions</a>, so check the <a href="http://www.perl.com/doc/manual/html/pod/perlre.html">Perl docs</a> for syntax and more info.</p>
	</dd>

	<dt id="FinishAction"><code>FinishAction</code></dt>
	<dd>
		<p>A <a href="/manual/bangs">bang</a> or <a href="/manual/options#Action">action</a> that is executed when the page has been downloaded and the parsing is done. This option is only valid on measures that connect to a site or file with <code>URL</code>, and not on <a href="#ParentChild">child</a> measures.</p>
	</dd>

	<dt id="StringIndex"><code>StringIndex</code></dt>
	<dd>
		<p>Defines which captured string from the <code>RegExp</code> this measure returns. This option is generally used in a <a href="#ParentChild">child</a> measure to determine which of the caputured values in a <a href="#ParentChild">parent</a> measure to use.</p>
	</dd>

	<dt id="StringIndex2"><code>StringIndex2</code></dt>
	<dd>
		<p>The second string index is used when using a <code>RegExp</code> in a measure that uses data from another WebParser measure (i.e. the <code>URL</code> points to a <a href="#ParentChild">parent</a> measure. In this case the <code>StringIndex</code> defines the index of the result of the parent measure's <code>RegExp</code> and the <code>StringIndex2</code> defines the index of this measure's <code>RegExp</code> (i.e. it defines the string that the measure returns).</p>
		
		<p>More information on using StringIndex2 can be found <a href="/tips/webparser-using-stringindex2">here</a>.</p>

		<p><b>Note:</b> If the <code>RegExp</code> is not defined in this measure, the <code>StringIndex2</code> has no effect.</p>
	</dd>

	<dt id="UpdateRate"><code>UpdateRate</code> <small>Default: <code>600</code></small></dt>
	<dd>
		<p>The rate in milliseconds determining how often the webpage is downloaded. This is relative to the config's main <a href="/manual/skins#Update">Update</a> rate <b>and</b> any <a href="/manual/measures/general-options/#UpdateDivider">UpdateDivider</a> on the measure. So the formula would be <code>Update</code> X <code>UpdateDivider</code> X <code>UpdateRate</code> = "how often the measure connects to the site".</p>

		<p><b>Note:</b> Some caution should be used in determining how often to connect to a site with WebParser. Excessively accessing a site can cause your computer to be seen as an "attack" and result in being blocked. The <code>UpdateRate</code> option defaults to <code>600</code> as a safety measure. This should not be changed unless there is some reason to connect more or less often to the site.</p>
	</dd>

	<dt id="DecodeCharacterReference"><code>DecodeCharacterReference</code> <small>Default: <code>0</code></small></dt>
	<dd>
		<p>Automatically decodes <a href="http://en.wikipedia.org/wiki/List_of_XML_and_HTML_character_entity_references">HTML Character References</a>. This will eliminate the need to use a <a href="/manual/measures/general-options/substitute"><code>Substitute</code></a> statement to translate character references like <code>&amp;quot;</code>, <code>&amp;amp;</code>, <code>&amp;lt;</code>, and <code>&amp;gt;</code> to the actual character. Valid values are:</p>
		<ul>
			<li><code>0</code>: Does nothing (default).</li>
			<li><code>1</code>: Decodes both numeric character references and character entity references.</li>
			<li><code>2</code>: Decodes only numeric character references.</li>
			<li><code>3</code>: Decodes only character entity references.</li>
		</ul>
	</dd>

	<dt id="Debug"><code>Debug</code> <small>Default: <code>0</code></small></dt>
	<dd>
		<p>Logs DEBUG messages to the Rainmeter <a href="/manual/user-interface/about#LogTab">log</a> or to a file. Valid values are:</p>
		<ul>
			<li><code>0</code>: Does not log DEBUG messages from WebParser.</li>
			<li><code>1</code>: Logs DEBUG message to the log. Rainmeter must also be in <a href="/manual/settings/rainmeter-section#Debug">Debug</a> mode.</li>
			<li><code>2</code>: Saves the downloaded webpage to <code>C:\WebParserDump.txt</code>. This can be useful since some web servers send different information depending which client requests it. Remember to remove this from your config once you have it working correctly.</li>
		</ul>
		 <p><b>Hint:</b> Determining <a href="#StringIndex">StringIndex</a> values to use in a <a id="#ParentChild">child</a> measure can be done by setting <code>Debug=1</code> on a measure having the <code>RegExp</code> option, which will display matched strings and StringIndex numbers in the Rainmeter <a href="/manual/user-interface/about#LogTab">log</a></p>
	</dd>

	<dt id="Debug2File"><code>Debug2File</code></dt>
	<dd>
		<p>If the <code>Debug</code> option is set to <code>2</code>, this option can be set to the path and name of the file to use for the downloaded webpage instead of <code>C:\WebParserDump.txt</code>.</p>

		<p><b>Note:</b> The folder for the file must already exist.</p>
	</dd>

	<dt id="Download"><code>Download</code> <small>Default: <code>0</code></small></dt>
	<dd>
		<p>If <code>Download=1</code>, the <code>URL</code> is downloaded to Window's <code>TEMP</code> folder and the name to the file is returned as string value. The measure can then be used with <a href="/manual/meters/general-options/#MeasureName">MeasureName</a> on an <a href="/manual/meters/image">Image</a> meter to download images from a site and display them.</p>
	</dd>

	<dt id="DownloadFile"><code>DownloadFile</code></dt>
	<dd>
		<p>If the <code>Download</code> option is set to <code>1</code>, this option defines a relative path and file name where the downloaded file will be saved instead of in Windows <code>TEMP</code>.

		<p>A folder <code>DownloadFile</code> will be created in the <a href="/manual/variables/built-in-variables#CURRENTPATH">current folder</a>, and the defined relative path and file name will be created under that. It is not possible to specify an absolute path.</p>

		<p><b>Note:</b> This file is <b>not</b> a temporary file so it is <b>not</b> deleted after unloading a skin or exiting Rainmeter.</p>

	</dd>

	<dt id="ErrorString"><code>ErrorString</code></dt>
	<dd>
		 <p>The value of the measure will be set to the string defined in this option if the <code>RegExp</code> results in a regular expression parsing error.</p>
	</dd>

	<dt id="ForceReload"><code>ForceReload</code> <small>Default: <code>0</code></small></dt>
	<dd>
		 <p>WebParser reads the resource only if it has been modified since last read. This can be overridden with <code>ForceReload=1</code>.</p>
	</dd>

	<dt id="ProxyServer"><code>ProxyServer</code></dt>
	<dd>
		<p>Name of the proxy server used by Windows Internet Explorer on the system. The plugin doesn't support any authentication, so <b>only</b> use proxy settings that do not require it.</p>

		<p><b>Examples:</b> <code>ProxyServer=ServerIP:Port</code>, <code>ProxyServer=ServerName:Port</code></p>
	</dd>

	<dt id="CodePage"><code>CodePage</code> <small>Default: <code>0</code></small></dt>
	<dd>
		 <p>Defines the codepage of the downloaded web page. For example: <code>CodePage=28605</code> interprets the page as <code>Latin 9 (ISO-8859-15)</code>. <code>CodePage=65001</code> means <code>UTF-8</code>. <code>CodePage=0</code> means no conversion is done.</p>

		 <p>Codepage definitions and more information can be found at <a href="http://www.microsoft.com/globaldev/reference/wincp.mspx">Windows code pages</a>.</p>
	</dd>
</dl>

<h2>Examples</h2>

<p>Retrieve the site title, first item and link from Slashdot's RSS feed.</p>

{% highlight ini %}
[Rainmeter]
Update=1000
DynamicWindowSize=1
BackgroundMode=2
SolidColor=0,0,0,255

[MeasureRSSParent]
Measure=Plugin
Plugin=WebParser
URL=http://slashdot.org/slashdot.rdf
RegExp="(?siU)&lt;title&gt;(.*)&lt;/title&gt;.*&lt;item&gt;.*&lt;title&gt;(.*)&lt;/title&gt;.*&lt;link&gt;(.*)&lt;/link&gt;"

[MeasureRSSTitle]
Measure=Plugin
Plugin=WebParser
URL=[MeasureRSSParent]
StringIndex=1

[MeasureRSSItemTitle]
Measure=Plugin
Plugin=WebParser
URL=[MeasureRSSParent]
StringIndex=2

[MeasureRSSItemLink]
Measure=Plugin
Plugin=WebParser
URL=[MeasureRSSParent]
StringIndex=3

[MeterRSSTitle]
Meter=String
MeasureName=MeasureRSSTitle
FontSize=14
FontColor=222,255,227,255
StringStyle=Bold
AntiAlias=1

[MeterRSSItemTitle]
Meter=String
MeasureName=MeasureRSSItemTitle
Y=2R
FontSize=11
FontColor=255,255,255,255
StringStyle=Bold
AntiAlias=1
LeftMouseUpAction=["[MeasureRSSItemLink]"]
DynamicVariables=1
{% endhighlight %}

<p>Retrieve the title, download and display an image for the first item in the Customize.org RSS feed.</p>

{% highlight ini %}
[Rainmeter]
Update=1000
DynamicWindowSize=1

[MeasureCustoParent]
Measure=Plugin
Plugin=WebParser.dll
URL=http://customize.org/feeds/submissions
RegExp="(?siU).*&lt;item&gt;.*&lt;title&gt;(.*)&lt;/title&gt;.*&lt;description&gt;.*src="(.*)".*&lt;/description&gt;.*&lt;link&gt;(.*)&lt;/link&gt;"

[MeasureTitle]
Measure=Plugin
Plugin=WebParser.dll
URL=[MeasureCustoParent]
StringIndex=1

[MeasureImage]
Measure=Plugin
Plugin=WebParser.dll
URL=[MeasureCustoParent]
StringIndex=2
Download=1

[MeasureLink]
Measure=Plugin
Plugin=WebParser.dll
URL=[MeasureCustoParent]
StringIndex=3

[MeterTitle]
Meter=String
MeasureName=MeasureTitle
FontSize=12
FontColor=255,255,255,255
SolidColor=0,0,0,255
AntiAlias=1

[MeterImage]
Meter=Image
MeasureName=MeasureImage
Y=2R
W=80
H=60
PreserveAspectRatio=2
LeftMouseUpAction=["[MeasureLink]"]
DynamicVariables=1
{% endhighlight %}
